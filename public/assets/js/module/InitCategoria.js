import Api from"./api.js";import CriaFiltro from"./criaFIltro.js";import CriaProduto from"./criaProduto.js";export default function InitCategoria(){document.querySelector("#listaProdutos")&&pegaId()}function pegaId(){var t=window.location.search.includes("id=")?window.location.search.split("?")[1].split("&")[0].split("=")[1]:window.location.pathname.replace(".html","").split("/").pop();+t?pegaIdCategoria(t):Api("http://localhost:8888/api/V1/categories/list",puxaDados)}function puxaDados(t){var r=window.location.pathname.replace(".html","").split("/").pop();pegaIdCategoria(t.items.find((function(t){return t.path===r})).id)}function pegaIdCategoria(t){var r="http://localhost:8888/api/V1/categories/"+"".concat(t);Api(r,carregaProdutos),alteraTextos()}var alteraTextos=function(){var t=window.location.pathname.replace(".html","").split("/").pop(),r=document.querySelector(".breadcrumb"),o=document.querySelector("h1");r.innerHTML=r.innerHTML+"<p>".concat(t,"</p>"),o.innerText=t},carregaProdutos=function(t){var r=t.filters,o=t.items;location.search.replace(/\?id\=\d+?/,"").length>0&&(o=filtraProdutos(t)),0!==o.length?(o.forEach((function(t){CriaProduto(t)})),r.forEach((function(r){CriaFiltro(r,t.items)}))):mostraErro()},filtraProdutos=function(t){var r=location.search.split("?")[1].split("&"),o=Object.entries(t.filters[0]);if(0!==(r=r.map((function(t){var r=t.split("=");if(Number(r[1]))return null;o.filter((function(r){return t.match(r[0])}));return t.split("=")})).filter((function(t){return null!==t}))).length){var a=t.items;return r.forEach((function(t){a=a.filter((function(r){if(r.filter[0][t[0]]===t[1])return r}))})),a}},mostraErro=function(){var t=document.querySelector("#listaProdutos"),r=document.createElement("li");r.classList.add("mensagem--erro"),r.innerHTML='\n    <div class="erro__container"><h2>Lista de produtos não foi encontrada… Tente novamente mais tarde, obrigado</h2><a href="/" class="btn btn--erro" data-link>Voltar para home</a></div>\n  ',t.appendChild(r)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS9pbml0Q2F0ZWdvcmlhLmpzIl0sIm5hbWVzIjpbIkFwaSIsIkNyaWFGaWx0cm8iLCJDcmlhUHJvZHV0byIsIkluaXRDYXRlZ29yaWEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwZWdhSWQiLCJ1cmxBdHVhbCIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwiaW5jbHVkZXMiLCJzcGxpdCIsInBhdGhuYW1lIiwicmVwbGFjZSIsInBvcCIsInBlZ2FJZENhdGVnb3JpYSIsInB1eGFEYWRvcyIsImpzb24iLCJwYXRoQXR1YWwiLCJpdGVtcyIsImZpbmQiLCJlbCIsInBhdGgiLCJpZCIsInVybEZpbmFsIiwiY29uY2F0IiwiY2FycmVnYVByb2R1dG9zIiwiYWx0ZXJhVGV4dG9zIiwiYnJlYWRjcnVtYiIsImgxIiwiaW5uZXJIVE1MIiwiaW5uZXJUZXh0IiwibGlzdGFGaWx0cm9zIiwiZmlsdGVycyIsImxpc3RhUHJvZHV0b3MiLCJsZW5ndGgiLCJmaWx0cmFQcm9kdXRvcyIsImZvckVhY2giLCJwcm9kdXRvIiwiZmlsdHJvIiwibW9zdHJhRXJybyIsImxpc3RhRmlsdHJvc0F0aXZvcyIsImZpbHRyb3NQcm9kdXRvcyIsIk9iamVjdCIsImVudHJpZXMiLCJtYXAiLCJ2YWxvcmVzIiwiTnVtYmVyIiwiZmlsdGVyIiwiaXRlbSIsIm1hdGNoIiwicHJvZHV0b3NGaWx0cmFkb3MiLCJ0aXBvRmlsdHJvIiwidWwiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCJdLCJtYXBwaW5ncyI6Ik9BQU9BLFFBQVMsa0JBQ1RDLGVBQWdCLHlCQUNoQkMsZ0JBQWlCLGtDQUVULFNBQVNDLGdCQUNBQyxTQUFTQyxjQUFjLG1CQUc3Q0MsU0FHRixTQUFTQSxTQUNQLElBQU1DLEVBQVdDLE9BQU9DLFNBQVNDLE9BQU9DLFNBQVMsT0FDN0NILE9BQU9DLFNBQVNDLE9BQU9FLE1BQU0sS0FBSyxHQUFHQSxNQUFNLEtBQUssR0FBR0EsTUFBTSxLQUFLLEdBQzlESixPQUFPQyxTQUFTSSxTQUFTQyxRQUFRLFFBQVMsSUFBSUYsTUFBTSxLQUFLRyxPQUV0RFIsRUFDTFMsZ0JBQWdCVCxHQUlsQlAsSUFBSSwrQ0FBZ0RpQixXQUd0RCxTQUFTQSxVQUFVQyxHQUNqQixJQUFNQyxFQUFZWCxPQUFPQyxTQUFTSSxTQUMvQkMsUUFBUSxRQUFTLElBQ2pCRixNQUFNLEtBQ05HLE1BRUhDLGdCQURXRSxFQUFLRSxNQUFNQyxNQUFLLFNBQUNDLEdBQUQsT0FBUUEsRUFBR0MsT0FBU0osS0FBV0ssSUFJNUQsU0FBU1IsZ0JBQWdCUSxHQUN2QixJQUFJQyxFQUFXLDJDQUFBLEdBQUFDLE9BQWdERixHQUMvRHhCLElBQUl5QixFQUFVRSxpQkFDZEMsZUFHRixJQUFNQSxhQUFlLFdBQ25CLElBQU1ULEVBQVlYLE9BQU9DLFNBQVNJLFNBQy9CQyxRQUFRLFFBQVMsSUFDakJGLE1BQU0sS0FDTkcsTUFFQ2MsRUFBYXpCLFNBQVNDLGNBQWMsZUFDbEN5QixFQUFLMUIsU0FBU0MsY0FBYyxNQUNsQ3dCLEVBQVdFLFVBQVlGLEVBQVdFLFVBQVgsTUFBQUwsT0FBNkJQLEVBQTdCLFFBQ3ZCVyxFQUFHRSxVQUFZYixHQUdYUSxnQkFBa0IsU0FBQ1QsR0FDdkIsSUFBTWUsRUFBZWYsRUFBS2dCLFFBQ3RCQyxFQUFnQmpCLEVBQUtFLE1BRXpCWCxTQUFTQyxPQUFPSSxRQUFRLGFBQWMsSUFBSXNCLE9BQVMsSUFBS0QsRUFBZ0JFLGVBQWVuQixJQUUxRCxJQUF6QmlCLEVBQWNDLFFBS2xCRCxFQUFjRyxTQUFRLFNBQUNDLEdBQ3JCckMsWUFBWXFDLE1BR2ROLEVBQWFLLFNBQVEsU0FBQ0UsR0FDcEJ2QyxXQUFXdUMsRUFBUXRCLEVBQUtFLFdBVHhCcUIsY0FhRUosZUFBaUIsU0FBQ25CLEdBQ3RCLElBQUl3QixFQUFxQmpDLFNBQVNDLE9BQU9FLE1BQU0sS0FBSyxHQUFHQSxNQUFNLEtBQ3pEK0IsRUFBa0JDLE9BQU9DLFFBQVEzQixFQUFLZ0IsUUFBUSxJQVdsRCxHQUFrQyxLQVRsQ1EsRUFBcUJBLEVBQ2xCSSxLQUFJLFNBQUNOLEdBQ0osSUFBSU8sRUFBVVAsRUFBTzVCLE1BQU0sS0FDM0IsR0FBSW9DLE9BQU9ELEVBQVEsSUFBSyxPQUFPLEtBQ2pCSixFQUFnQk0sUUFBTyxTQUFDQyxHQUFELE9BQVVWLEVBQU9XLE1BQU1ELEVBQUssT0FDakUsT0FBT1YsRUFBTzVCLE1BQU0sUUFFckJxQyxRQUFPLFNBQUNULEdBQUQsT0FBdUIsT0FBWEEsTUFFQ0osT0FBdkIsQ0FFQSxJQUFJZ0IsRUFBb0JsQyxFQUFLRSxNQVU3QixPQVJBc0IsRUFBbUJKLFNBQVEsU0FBQ2UsR0FDMUJELEVBQW9CQSxFQUFrQkgsUUFBTyxTQUFDVixHQUc1QyxHQUZnQkEsRUFBUVUsT0FBTyxHQUFHSSxFQUFXLE1BQVFBLEVBQVcsR0FFakQsT0FBT2QsUUFJbkJhLElBR0hYLFdBQWEsV0FDakIsSUFBTWEsRUFBS2xELFNBQVNDLGNBQWMsa0JBQzVCa0QsRUFBS25ELFNBQVNvRCxjQUFjLE1BSWxDRCxFQUFHRSxVQUFVQyxJQUFJLGtCQUNqQkgsRUFBR3hCLFVBSlcsbU1BTWR1QixFQUFHSyxZQUFZSiIsImZpbGUiOiJtb2R1bGUvaW5pdENhdGVnb3JpYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBcGkgZnJvbSBcIi4vYXBpLmpzXCI7XHJcbmltcG9ydCBDcmlhRmlsdHJvIGZyb20gXCIuL2NyaWFGSWx0cm8uanNcIjtcclxuaW1wb3J0IENyaWFQcm9kdXRvIGZyb20gXCIuL2NyaWFQcm9kdXRvLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbml0Q2F0ZWdvcmlhKCkge1xyXG4gIGNvbnN0IGxpc3RhUHJvZHV0b3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpc3RhUHJvZHV0b3NcIik7XHJcbiAgaWYgKCFsaXN0YVByb2R1dG9zKSByZXR1cm47XHJcblxyXG4gIHBlZ2FJZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwZWdhSWQoKSB7XHJcbiAgY29uc3QgdXJsQXR1YWwgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKFwiaWQ9XCIpXHJcbiAgICA/IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3BsaXQoXCI/XCIpWzFdLnNwbGl0KFwiJlwiKVswXS5zcGxpdChcIj1cIilbMV1cclxuICAgIDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoXCIuaHRtbFwiLCBcIlwiKS5zcGxpdChcIi9cIikucG9wKCk7XHJcblxyXG4gIGlmICghISt1cmxBdHVhbCkge1xyXG4gICAgcGVnYUlkQ2F0ZWdvcmlhKHVybEF0dWFsKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIEFwaShcImh0dHA6Ly9sb2NhbGhvc3Q6ODg4OC9hcGkvVjEvY2F0ZWdvcmllcy9saXN0XCIsIHB1eGFEYWRvcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHB1eGFEYWRvcyhqc29uKSB7XHJcbiAgY29uc3QgcGF0aEF0dWFsID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXHJcbiAgICAucmVwbGFjZShcIi5odG1sXCIsIFwiXCIpXHJcbiAgICAuc3BsaXQoXCIvXCIpXHJcbiAgICAucG9wKCk7XHJcbiAgY29uc3QgaWQgPSBqc29uLml0ZW1zLmZpbmQoKGVsKSA9PiBlbC5wYXRoID09PSBwYXRoQXR1YWwpLmlkO1xyXG4gIHBlZ2FJZENhdGVnb3JpYShpZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBlZ2FJZENhdGVnb3JpYShpZCkge1xyXG4gIGxldCB1cmxGaW5hbCA9IFwiaHR0cDovL2xvY2FsaG9zdDo4ODg4L2FwaS9WMS9jYXRlZ29yaWVzL1wiICsgYCR7aWR9YDtcclxuICBBcGkodXJsRmluYWwsIGNhcnJlZ2FQcm9kdXRvcyk7XHJcbiAgYWx0ZXJhVGV4dG9zKCk7XHJcbn1cclxuXHJcbmNvbnN0IGFsdGVyYVRleHRvcyA9ICgpID0+IHtcclxuICBjb25zdCBwYXRoQXR1YWwgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcclxuICAgIC5yZXBsYWNlKFwiLmh0bWxcIiwgXCJcIilcclxuICAgIC5zcGxpdChcIi9cIilcclxuICAgIC5wb3AoKTtcclxuXHJcbiAgbGV0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJyZWFkY3J1bWJcIik7XHJcbiAgY29uc3QgaDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaDFcIik7XHJcbiAgYnJlYWRjcnVtYi5pbm5lckhUTUwgPSBicmVhZGNydW1iLmlubmVySFRNTCArIGA8cD4ke3BhdGhBdHVhbH08L3A+YDtcclxuICBoMS5pbm5lclRleHQgPSBwYXRoQXR1YWw7XHJcbn07XHJcblxyXG5jb25zdCBjYXJyZWdhUHJvZHV0b3MgPSAoanNvbikgPT4ge1xyXG4gIGNvbnN0IGxpc3RhRmlsdHJvcyA9IGpzb24uZmlsdGVycztcclxuICBsZXQgbGlzdGFQcm9kdXRvcyA9IGpzb24uaXRlbXM7XHJcblxyXG4gIGxvY2F0aW9uLnNlYXJjaC5yZXBsYWNlKC9cXD9pZFxcPVxcZCs/LywgXCJcIikubGVuZ3RoID4gMCA/IChsaXN0YVByb2R1dG9zID0gZmlsdHJhUHJvZHV0b3MoanNvbikpIDogXCJcIjtcclxuXHJcbiAgaWYgKGxpc3RhUHJvZHV0b3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICBtb3N0cmFFcnJvKCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBsaXN0YVByb2R1dG9zLmZvckVhY2goKHByb2R1dG8pID0+IHtcclxuICAgIENyaWFQcm9kdXRvKHByb2R1dG8pO1xyXG4gIH0pO1xyXG5cclxuICBsaXN0YUZpbHRyb3MuZm9yRWFjaCgoZmlsdHJvKSA9PiB7XHJcbiAgICBDcmlhRmlsdHJvKGZpbHRybywganNvbi5pdGVtcyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBmaWx0cmFQcm9kdXRvcyA9IChqc29uKSA9PiB7XHJcbiAgbGV0IGxpc3RhRmlsdHJvc0F0aXZvcyA9IGxvY2F0aW9uLnNlYXJjaC5zcGxpdChcIj9cIilbMV0uc3BsaXQoXCImXCIpO1xyXG4gIGxldCBmaWx0cm9zUHJvZHV0b3MgPSBPYmplY3QuZW50cmllcyhqc29uLmZpbHRlcnNbMF0pO1xyXG5cclxuICBsaXN0YUZpbHRyb3NBdGl2b3MgPSBsaXN0YUZpbHRyb3NBdGl2b3NcclxuICAgIC5tYXAoKGZpbHRybykgPT4ge1xyXG4gICAgICBsZXQgdmFsb3JlcyA9IGZpbHRyby5zcGxpdChcIj1cIik7XHJcbiAgICAgIGlmIChOdW1iZXIodmFsb3Jlc1sxXSkpIHJldHVybiBudWxsO1xyXG4gICAgICBsZXQgbWF0Y2hlcyA9IGZpbHRyb3NQcm9kdXRvcy5maWx0ZXIoKGl0ZW0pID0+IGZpbHRyby5tYXRjaChpdGVtWzBdKSk7XHJcbiAgICAgIHJldHVybiBmaWx0cm8uc3BsaXQoXCI9XCIpO1xyXG4gICAgfSlcclxuICAgIC5maWx0ZXIoKGZpbHRybykgPT4gZmlsdHJvICE9PSBudWxsKTtcclxuXHJcbiAgaWYgKGxpc3RhRmlsdHJvc0F0aXZvcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgbGV0IHByb2R1dG9zRmlsdHJhZG9zID0ganNvbi5pdGVtcztcclxuXHJcbiAgbGlzdGFGaWx0cm9zQXRpdm9zLmZvckVhY2goKHRpcG9GaWx0cm8pID0+IHtcclxuICAgIHByb2R1dG9zRmlsdHJhZG9zID0gcHJvZHV0b3NGaWx0cmFkb3MuZmlsdGVyKChwcm9kdXRvKSA9PiB7XHJcbiAgICAgIGxldCByZXN1bHRhZG8gPSBwcm9kdXRvLmZpbHRlclswXVt0aXBvRmlsdHJvWzBdXSA9PT0gdGlwb0ZpbHRyb1sxXTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHRhZG8pIHJldHVybiBwcm9kdXRvO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBwcm9kdXRvc0ZpbHRyYWRvcztcclxufTtcclxuXHJcbmNvbnN0IG1vc3RyYUVycm8gPSAoKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpc3RhUHJvZHV0b3NcIik7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgY29uc3QgbWVuc2FnZW0gPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiZXJyb19fY29udGFpbmVyXCI+PGgyPkxpc3RhIGRlIHByb2R1dG9zIG7Do28gZm9pIGVuY29udHJhZGHigKYgVGVudGUgbm92YW1lbnRlIG1haXMgdGFyZGUsIG9icmlnYWRvPC9oMj48YSBocmVmPVwiL1wiIGNsYXNzPVwiYnRuIGJ0bi0tZXJyb1wiIGRhdGEtbGluaz5Wb2x0YXIgcGFyYSBob21lPC9hPjwvZGl2PlxyXG4gIGA7XHJcbiAgbGkuY2xhc3NMaXN0LmFkZChcIm1lbnNhZ2VtLS1lcnJvXCIpO1xyXG4gIGxpLmlubmVySFRNTCA9IG1lbnNhZ2VtO1xyXG5cclxuICB1bC5hcHBlbmRDaGlsZChsaSk7XHJcbn07XHJcbiJdfQ==
