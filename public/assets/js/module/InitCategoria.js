import Api from"./Api.js";import CriaFiltro from"./CriaFIltro.js";import CriaProduto from"./CriaProduto.js";export default function InitCategoria(){document.querySelector("#listaProdutos")&&pegaId()}function pegaId(){const o=window.location.search.includes("id=")?window.location.search.split("?")[1].split("&")[0].split("=")[1]:window.location.pathname.replace(".html","").split("/").pop();+o?pegaIdCategoria(o):Api("http://localhost:8888/api/V1/categories/list",puxaDados)}function puxaDados(o){const t=window.location.pathname.replace(".html","").split("/").pop();pegaIdCategoria(o.items.find((o=>o.path===t)).id)}function pegaIdCategoria(o){Api(`http://localhost:8888/api/V1/categories/${o}`,carregaProdutos),alteraTextos()}const alteraTextos=()=>{const o=window.location.pathname.replace(".html","").split("/").pop();let t=document.querySelector(".breadcrumb");const i=document.querySelector("h1");t.innerHTML=t.innerHTML+`<p>${o}</p>`,i.innerText=o},carregaProdutos=o=>{sessionStorage.teste=JSON.stringify(o);const t=o.filters;let i=o.items;if(window.location.search.includes("color=")){const o=window.location.search.split("color=")[1];i=i.filter((t=>t.filter[0].color===o))}i.forEach((o=>{CriaProduto(o)})),t.forEach((t=>{CriaFiltro(t,o.items)}))};